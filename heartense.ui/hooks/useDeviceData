import useSWR from 'swr';
import { fetcher } from '../actions/fetcher';
import { endpoints } from '../actions/endpoints';
import { DeviceColour } from '../types/deviceColours';

export const useDeviceColour = () => {
  const { data: devices, error, mutate } = useSWR<DeviceColour[]>(endpoints.getColour, fetcher, { refreshInterval: 5000 });

//   const updateData = (aKey: string, aValue: number) => {
//     if (devices) {
//       const settingIndex = devices?.findIndex((setting) => setting.key === aKey);
//       let newSettings = devices
//       if (settingIndex !== undefined && settingIndex !== -1) {
//         newSettings[settingIndex].value = aValue;
//         mutate(newSettings, false);
//       }
//     }
//   }
  return{
    settings: devices ?? [],
    // updateData: updateData,
    isLoading: !devices && !error,
    hasError: !!error,
  }
}